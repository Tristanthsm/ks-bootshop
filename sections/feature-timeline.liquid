<div
  id="feature-timeline-{{ section.id }}"
  class="
    feature-timeline-section
    {{ section.settings.bg_color }}
    {{ section.settings.bg_gradient }}
    {{ section.settings.text_color }}
    {{ section.settings.border_top_width | prepend: 'border-top-' }}
    {{ section.settings.border_bottom_width | prepend: 'border-bottom-' }}
    {{ section.settings.border_color }}
    {{ section.settings.pt | prepend: 'pt-' }}
    {{ section.settings.pb | prepend: 'pb-' }}
  "
  style="
    --bs-bg-opacity: {{ section.settings.bg_opacity | append: '%' }};
    --bs-border-opacity: {{ section.settings.border_opacity | append: '%' }};
  ">
  <div
    class="container"
    style="max-width: {{ section.settings.container_max_width }}px">
    <div class="row g-5 align-items-start align-items-desktop-center">
      <div class="col-12 col-desktop-5">
        {% render 'section-header', class: 'text-desktop-start mb-4' %}
        {% unless section.settings.lead_text == blank %}
          <p class="lead opacity-80 mb-4">{{ section.settings.lead_text }}</p>
        {% endunless %}
        {% unless section.settings.secondary_text == blank %}
          <div class="feature-timeline-secondary rte opacity-70 mb-4">{{ section.settings.secondary_text }}</div>
        {% endunless %}
        {% unless section.settings.cta_text == blank %}
          <div class="d-flex flex-column flex-tablet-row gap-3">
            <a class="btn {{ section.settings.cta_style }}" href="{{ section.settings.cta_url }}">{{ section.settings.cta_text }}</a>
            {% unless section.settings.secondary_cta_text == blank %}
              <a class="btn {{ section.settings.secondary_cta_style }}" href="{{ section.settings.secondary_cta_url }}">{{ section.settings.secondary_cta_text }}</a>
            {% endunless %}
          </div>
        {% endunless %}
        {% unless section.settings.helper_text == blank %}
          <p class="small opacity-70 mt-3 mb-0">{{ section.settings.helper_text }}</p>
        {% endunless %}
      </div>
      <div class="col-12 col-desktop-7">
        <ol
          class="feature-timeline"
          data-feature-timeline
          data-animate="{{ section.settings.enable_animation }}"
          data-delay="{{ section.settings.animation_delay }}">
          {% for block in section.blocks %}
            <li class="feature-timeline-step" {{ block.shopify_attributes }}>
              {% unless block.settings.icon == blank %}
                <span class="feature-timeline-step-icon" aria-hidden="true">{{ block.settings.icon }}</span>
              {% endunless %}
              <div class="feature-timeline-step-body">
                <div class="d-flex flex-wrap gap-2 align-items-baseline mb-1">
                  {% unless block.settings.title == blank %}
                    <h3 class="feature-timeline-step-title h5 mb-0">{{ block.settings.title }}</h3>
                  {% endunless %}
                  {% unless block.settings.meta == blank %}
                    <span class="feature-timeline-step-meta badge bg-body-secondary text-body small">{{ block.settings.meta }}</span>
                  {% endunless %}
                </div>
                {% unless block.settings.description == blank %}
                  <div class="feature-timeline-step-description rte opacity-80">{{ block.settings.description }}</div>
                {% endunless %}
              </div>
            </li>
          {% endfor %}
        </ol>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Parcours en étapes",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Mise en page"
    },
    {
      "type": "select",
      "id": "bg_color",
      "label": "Couleur de fond",
      "default": "bg-white",
      "options": [
        { "value": "bg-primary", "label": "Primaire" },
        { "value": "bg-secondary", "label": "Secondaire" },
        { "value": "bg-body", "label": "Corps" },
        { "value": "bg-white", "label": "Blanc" }
      ]
    },
    {
      "type": "range",
      "id": "bg_opacity",
      "label": "Opacité du fond",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 100,
      "unit": "%"
    },
    {
      "type": "select",
      "id": "bg_gradient",
      "label": "Dégradé",
      "options": [
        { "value": "bg-gradient", "label": "Oui" },
        { "value": "", "label": "Non" }
      ],
      "default": ""
    },
    {
      "type": "select",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "text-body",
      "options": [
        { "value": "text-primary", "label": "Primaire" },
        { "value": "text-secondary", "label": "Secondaire" },
        { "value": "text-body", "label": "Corps" },
        { "value": "text-white", "label": "Blanc" }
      ]
    },
    {
      "type": "range",
      "id": "border_top_width",
      "label": "Largeur bord supérieur",
      "default": 0,
      "min": 0,
      "max": 16,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "border_bottom_width",
      "label": "Largeur bord inférieur",
      "default": 0,
      "min": 0,
      "max": 16,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "border_color",
      "label": "Couleur de bordure",
      "default": "border-body",
      "options": [
        { "value": "border-primary", "label": "Primaire" },
        { "value": "border-secondary", "label": "Secondaire" },
        { "value": "border-body", "label": "Corps" },
        { "value": "border-white", "label": "Blanc" }
      ]
    },
    {
      "type": "range",
      "id": "border_opacity",
      "label": "Opacité des bordures",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 15,
      "unit": "%"
    },
    {
      "type": "range",
      "id": "pt",
      "label": "Marge supérieure",
      "default": 9,
      "min": 0,
      "max": 16,
      "step": 1
    },
    {
      "type": "range",
      "id": "pb",
      "label": "Marge inférieure",
      "default": 9,
      "min": 0,
      "max": 16,
      "step": 1
    },
    {
      "type": "range",
      "id": "container_max_width",
      "label": "Largeur max du contenu",
      "min": 720,
      "max": 1400,
      "step": 20,
      "unit": "px",
      "default": 1200
    },
    {
      "type": "header",
      "content": "Contenus"
    },
    {
      "type": "text",
      "id": "header_title",
      "label": "Titre",
      "default": "Votre routine intelligente"
    },
    {
      "type": "richtext",
      "id": "header_description",
      "label": "Description",
      "default": "<p>Visualisez chaque étape clé de l'expérience Aquasplash, du remplissage jusqu'à la recharge.</p>"
    },
    {
      "type": "text",
      "id": "lead_text",
      "label": "Phrase d'accroche",
      "default": "Optimisez chaque utilisation en suivant ces étapes guidées."
    },
    {
      "type": "richtext",
      "id": "secondary_text",
      "label": "Texte complémentaire",
      "default": "<p>Conçu pour les déplacements, Aquasplash s'adapte à votre quotidien grâce à un flux ergonomique et des repères lumineux intelligents.</p>"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Bouton principal",
      "default": "Configurer mon kit"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "Lien du bouton principal"
    },
    {
      "type": "select",
      "id": "cta_style",
      "label": "Style du bouton principal",
      "default": "btn-primary",
      "options": [
        { "value": "btn-primary", "label": "Primaire" },
        { "value": "btn-outline-primary", "label": "Primaire contour" },
        { "value": "btn-secondary", "label": "Secondaire" },
        { "value": "btn-outline-secondary", "label": "Secondaire contour" },
        { "value": "btn-white", "label": "Blanc" }
      ]
    },
    {
      "type": "text",
      "id": "secondary_cta_text",
      "label": "Bouton secondaire"
    },
    {
      "type": "url",
      "id": "secondary_cta_url",
      "label": "Lien du bouton secondaire"
    },
    {
      "type": "select",
      "id": "secondary_cta_style",
      "label": "Style du bouton secondaire",
      "default": "btn-outline-primary",
      "options": [
        { "value": "btn-primary", "label": "Primaire" },
        { "value": "btn-outline-primary", "label": "Primaire contour" },
        { "value": "btn-secondary", "label": "Secondaire" },
        { "value": "btn-outline-secondary", "label": "Secondaire contour" },
        { "value": "btn-white", "label": "Blanc" }
      ]
    },
    {
      "type": "text",
      "id": "helper_text",
      "label": "Texte d'aide",
      "default": "Livraison neutre en carbone & garantie 30 jours satisfaits ou remboursés."
    },
    {
      "type": "checkbox",
      "id": "enable_animation",
      "label": "Animer les étapes à l'apparition",
      "default": true
    },
    {
      "type": "range",
      "id": "animation_delay",
      "label": "Délai entre chaque étape",
      "min": 50,
      "max": 400,
      "step": 10,
      "default": 140,
      "unit": "ms"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Étape",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icône ou emoji",
          "default": "1"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Titre",
          "default": "Remplissez"
        },
        {
          "type": "text",
          "id": "meta",
          "label": "Sous-titre",
          "default": "30 secondes"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description",
          "default": "<p>Remplissez le réservoir avec de l'eau tempérée et ajoutez une goutte de solution antibactérienne.</p>"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Parcours en étapes",
      "category": "Contenu",
      "blocks": [
        {
          "type": "step"
        },
        {
          "type": "step"
        },
        {
          "type": "step"
        }
      ]
    }
  ]
}
{% endschema %}
